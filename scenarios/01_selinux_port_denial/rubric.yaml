variables:
  audit2allow_path: /usr/bin/audit2allow
  audit_log_path: /var/log/audit/audit.log
  failed_port: '8088'
  http_port_t_type: http_port_t
  httpd_conf_path: /etc/httpd/conf/httpd.conf
  recommended_port: '80'
  selinux_config_path: /etc/selinux/config
  selinux_state: enforcing
  semanage_install_command: dnf install policycoreutils-python-utils
  semanage_path_1: /usr/sbin/semanage
  semanage_path_2: /usr/bin/semanage
  semanage_port_add_command_tcp: semanage port -a -t http_port_t -p tcp 8088
  service_name: httpd
  systemctl_start_command: systemctl start httpd
  vi_edit_command: vi /etc/httpd/conf/httpd.conf
dimensions:
- diagnosis_accuracy: Evaluates whether the assistant correctly identified the root
    cause of the reported problem.
  grading_type: score
  scores:
    0: Failed to identify the problem or provided completely incorrect diagnosis.
    1: Partially identified the problem but missed the SELinux root cause.
    2: Identified SELinux as an issue but didn't fully explain the port binding problem.
    3: Correctly identified SELinux enforcing mode blocking port {{failed_port}} as
      the root cause of the service failure.
- solution_correctness: Evaluates whether the proposed solutions would actually resolve
    the problem.
  grading_type: score
  scores:
    0: Solutions would not fix the problem or would cause additional issues.
    1: Solutions are partially correct but incomplete or would only partially resolve
      the issue.
    2: Solutions would work but are missing important details or best practices.
    3: Solutions are completely correct and would fully resolve the issue.
- solution_completeness: Evaluates whether the suggested solutions include all necessary
    steps for successful implementation.
  grading_type: binary
- factual_accuracy: Evaluates whether all information provided by the assistant, including
    diagnostic details and command outputs, is factually correct.
  grading_type: binary
- clarity_and_organization: Evaluates the readability, structure, and overall presentation
    of the assistant's response.
  grading_type: score
  scores:
    0: Response is unintelligible or completely unorganized.
    1: Response is difficult to understand or poorly structured.
    2: Response is generally clear and organized but could be improved.
    3: Response is exceptionally clear, well-structured, and easy to follow.
criteria:
  identifies_service_failure:
    category: Diagnosis
    weight: 2
    dimension: diagnosis_accuracy
    criterion: The diagnosis correctly identifies that the {{service_name}} service
      failed to start due to a port binding issue.
  identifies_port_binding_denial:
    category: Diagnosis
    weight: 3
    dimension: diagnosis_accuracy
    criterion: The diagnosis correctly identifies the permission denied error when
      binding to port {{failed_port}} as the primary symptom.
  identifies_selinux_root_cause:
    category: Diagnosis
    weight: 5
    dimension: diagnosis_accuracy
    criterion: The diagnosis correctly identifies SELinux `{{selinux_state}}` mode
      as the root cause preventing Apache from binding to port {{failed_port}}.
  explains_selinux_port_policy:
    category: Diagnosis
    weight: 2
    dimension: diagnosis_accuracy
    criterion: The response explains that SELinux only allows HTTP services to bind
      to specific ports by default (e.g., 80, 443) and port {{failed_port}} is not
      in the allowed list.
  provides_semanage_solution:
    category: Solution
    weight: 5
    dimension: solution_correctness
    criterion: Provides a solution using `semanage port -a -t {{http_port_t_type}}
      -p tcp {{failed_port}}` to add port {{failed_port}} to the allowed HTTP ports.
  semanage_solution_complete:
    category: Solution
    weight: 3
    dimension: solution_completeness
    criterion: The semanage solution includes checking for tool availability, the
      correct semanage command with proper parameters, and restarting the service.
  provides_alternative_port_solution:
    category: Solution
    weight: 2
    dimension: solution_correctness
    criterion: Provides an alternative solution to change Apache configuration to
      use a standard port like {{recommended_port}} that SELinux allows by default.
  alternative_solution_complete:
    category: Solution
    weight: 2
    dimension: solution_completeness
    criterion: The alternative solution includes editing {{httpd_conf_path}}, changing
      the Listen directive, and restarting the service.
  factual_accuracy_port_config:
    category: Accuracy
    weight: 2
    dimension: factual_accuracy
    criterion: The response correctly states that Apache is configured to listen on
      port {{failed_port}}.
  factual_accuracy_selinux_state:
    category: Accuracy
    weight: 2
    dimension: factual_accuracy
    criterion: The response correctly states that SELinux is in `{{selinux_state}}`
      mode.
  overall_clarity_and_organization:
    category: Output
    weight: from_scores
    dimension: clarity_and_organization
    criterion: from_scores
metadata:
  timestamp: '2026-02-12T11:00:00.000000'
  operation: manual_refine
  description: Manually refined to be solution-centric and tool-agnostic, focusing
    on correct diagnosis and fix rather than specific tool usage
  feedback_applied: Rubric should focus on end result (correctly diagnosing SELinux
    port binding issue and providing correct fix) rather than specific diagnostic
    tools used
